---
- name: Boot systems from an ISO via Redfish
  hosts: localhost
  gather_facts: false
  vars:
    debug_redfish: false

    iso_url: http://deep-thought:9080/linux/isos/rhel-9.2-x86_64-dvd.iso

    bmc_hosts:
      # SuperMicro Example
      #- name: endurance
      #  endpoint: endurance.mgmt.kemo.labs
      #  username: ansible
      #  password: n0tPassword
      #  system_type: supermicro

      # iDRAC8 Example
      #- name: serenity
      #  endpoint: serenity.mgmt.kemo.labs
      #  username: ansible
      #  password: n0tPassword
      #  system_type: iDRAC8

      # iDRAC9 Example
      #- name: dell-per640
      #  endpoint: 10.1.2.3
      #  username: root
      #  password: calvin
      #  system_type: iDRAC9

      # iDRAC10 Example
      #- name: dell-per670
      #  endpoint: 10.1.2.3
      #  username: root
      #  password: calvin
      #  system_type: iDRAC10

      # iLO5 Example
      #- name: hpe-dl120-g10
      #  endpoint: 10.1.2.3
      #  username: Administrator
      #  password: password
      #  system_type: iLO5

      # iLO4 Example
      #- name: hpe-dl20-g9
      #  endpoint: 10.1.2.3
      #  username: Administrator
      #  password: password
      #  system_type: iLO4

      # sushy-tools Example
      #- name: 1baa7e2b-9cc6-426f-b0ab-d309b3030f57
      #  endpoint: 192.168.42.40:8111
      #  endpoint_protocol: http
      #  system_type: sushy-tools

  tasks:

    - name: Host entry point task
      ansible.builtin.include_tasks:
        file: tasks/host_entrypoint.yml
      loop: "{{ bmc_hosts }}"
      loop_control:
        loop_var: host
        label: "{{ host.name }}"
